# Docker Compose Environment Variables Example
# Copy this file to .env and update with your values

# Database Configuration
POSTGRES_SERVER=postgres
POSTGRES_USER=scouting_outing
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=scouting_outing_manager
POSTGRES_PORT=5432

# Stack Auth Database Configuration
STACKAUTH_DB_USER=stackauth
STACKAUTH_DB_PASSWORD=stackauth_secure_password_here
STACKAUTH_DB_NAME=stackauth

# Security
SECRET_KEY=your_secret_key_here
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:8080

# Initial Admin User
# The user who signs up with this email will automatically get admin role
INITIAL_ADMIN_EMAIL=admin@example.com

# Stack Auth Configuration
# Stack Auth runs in its own container
STACK_SERVER_SECRET=your_generated_stack_server_secret_here
STACK_API_URL=http://localhost:8102
STACK_DASHBOARD_URL=http://localhost:8101
# These are configured in the Stack Auth dashboard after initial setup
STACK_PROJECT_ID=
STACK_PUBLISHABLE_CLIENT_KEY=
STACK_SECRET_SERVER_KEY=
FRONTEND_URL=http://localhost:3000

# Frontend Build Configuration (for production)
VITE_API_URL=/api

# Deployment Configuration
RESTART_POLICY=no
DEBUG=true
HEALTHCHECK_INTERVAL=5s

# Backend Configuration
# Command to run in the backend container - includes database migrations and server startup
BACKEND_COMMAND=sh -c "echo \"Waiting for database...\" && sleep 5 && echo \"Applying migrations with Atlas...\" && export DATABASE_URL=postgresql+asyncpg://$$POSTGRES_USER:$$POSTGRES_PASSWORD@$$POSTGRES_SERVER:$$POSTGRES_PORT/$$POSTGRES_DB && atlas migrate apply --url \"postgresql://$$POSTGRES_USER:$$POSTGRES_PASSWORD@$$POSTGRES_SERVER:$$POSTGRES_PORT/$$POSTGRES_DB?sslmode=disable\" && echo \"Initializing database...\" && python -m app.db.init_db || echo \"Database already initialized\" && echo \"Starting server...\" && uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload"
BACKEND_VOLUME_MOUNT=./backend:/app
BACKEND_PORT=8000